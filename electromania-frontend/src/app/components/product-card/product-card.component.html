<div class="card-producto" [class.is-offer]="isOffer" (click)="onCardClick()" (keyup.enter)="onCardClick()" tabindex="0"
  role="button">

  <!-- BADGES -->
  <div class="badge-container">
    @if (isOffer) {
    <span class="badge badge-offer">OFERTA</span>
    }
    @if (isFeatured) {
    <span class="badge badge-featured">DESTACADO</span>
    }
  </div>

  <!-- IMAGE -->
  <div class="imagen-container">
    @if (product.images && product.images.length > 0) {
      <img [src]="product.images[0]" [alt]="product.product_name" loading="lazy" (error)="handleImageError($event)">
    } @else {
      <div class="placeholder-image">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
          <circle cx="8.5" cy="8.5" r="1.5"></circle>
          <polyline points="21 15 16 10 5 21"></polyline>
        </svg>
        <span>{{ product.product_name }}</span>
      </div>
    }
  </div>

  <!-- CONTENT -->
  <div class="info-producto">
    <h4 class="titulo">
      {{ product.product_name }}
    </h4>

    <p class="descripcion">
      {{ product.description }}
    </p>

    <!-- PRICES -->
    <div class="precio-container">
      @if (isOffer) {
      <span class="precio-original">Bs. {{ product.price | number:'1.2-2' }}</span>
      <span class="precio-final">Bs. {{ getDiscountPrice(product.price) | number:'1.2-2' }}</span>
      } @else {
      <span class="precio-final">Bs. {{ product.price | number:'1.2-2' }}</span>
      }
    </div>

    <!-- ACTION BUTTON -->
    <button class="btn-action" (click)="onAddToCart($event)">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round">
        <circle cx="9" cy="21" r="1"></circle>
        <circle cx="20" cy="21" r="1"></circle>
        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
      </svg>
      {{ isOffer ? 'Agregar Oferta' : 'Agregar' }}
    </button>
  </div>

</div>