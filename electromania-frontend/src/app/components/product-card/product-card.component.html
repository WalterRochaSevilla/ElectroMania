<div class="card-producto" [class.is-offer]="isOffer" (click)="onCardClick()">

    <!-- BADGES -->
    <div class="badge-container">
        <span *ngIf="isOffer" class="badge badge-offer">OFERTA</span>
        <span *ngIf="isFeatured" class="badge badge-featured">DESTACADO</span>
    </div>

    <!-- IMAGE -->
    <div class="imagen-container">
        <img [src]="product.imagen || 'https://via.placeholder.com/300'" [alt]="product.nombre" loading="lazy"
            (error)="handleImageError($event)">
    </div>

    <!-- CONTENT -->
    <div class="info-producto">
        <h4 class="titulo" [title]="product.nombre">
            {{ product.nombre }}
        </h4>

        <p class="descripcion">
            {{ product.descripcion }}
        </p>

        <!-- PRICES -->
        <div class="precio-container">
            <ng-container *ngIf="isOffer; else regularPrice">
                <span class="precio-original">Bs. {{ product.precio | number:'1.2-2' }}</span>
                <span class="precio-final">Bs. {{ getDiscountPrice(product.precio) | number:'1.2-2' }}</span>
            </ng-container>
            <ng-template #regularPrice>
                <span class="precio-final">Bs. {{ product.precio | number:'1.2-2' }}</span>
            </ng-template>
        </div>

        <!-- ACTION BUTTON -->
        <button class="btn-action" (click)="onAddToCart($event)">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            {{ isOffer ? 'Agregar Oferta' : 'Agregar' }}
        </button>
    </div>

</div>