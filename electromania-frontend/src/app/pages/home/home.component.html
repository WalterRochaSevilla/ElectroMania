<div class="home-container">
  <div class="pagina-catalogo-container" [class.modo-claro]="!modoOscuro">

    <!-- SEARCH & FILTER HEADER (Pinterest Style) -->
    <section class="search-header-wrapper">
      <div class="search-bar-glass">

        <!-- Search Icon & Input -->
        <div class="search-input-group">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round" class="search-icon">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
          <input type="text" placeholder="Buscar componentes..." [(ngModel)]="busqueda" (input)="buscarComponentes()">
          <!-- Clear Button -->
          <button *ngIf="busqueda" class="btn-clear" (click)="busqueda=''; buscarComponentes()">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>

        <div class="divider-vertical"></div>

        <!-- Filter Toggle Button -->
        <button class="btn-filter-toggle" (click)="toggleFiltrosAvanzados()" [class.active]="filtrosAvanzadosAbierto">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 3H2l8 9.46V19l4 2v-8.54L22 3z"></path>
          </svg>
          Filtros
        </button>
      </div>

      <!-- ADVANCED FILTERS PANEL -->
      <div class="advanced-filters-panel" *ngIf="filtrosAvanzadosAbierto">
        <div class="filters-grid">

          <!-- Filter Group: Categories -->
          <div class="filter-group">
            <label for="category-filter">Categoría</label>
            <div class="custom-select-wrapper">
              <select id="category-filter">
                <option value="">Todas</option>
                <option *ngFor="let cat of categorias" [value]="cat">{{ cat }}</option>
              </select>
            </div>
          </div>

          <!-- Filter Group: Price -->
          <div class="filter-group">
            <label for="price-filter">Precio</label>
            <div class="custom-select-wrapper">
              <select id="price-filter">
                <option value="">Todos</option>
                <option value="0-50">Menos de 50 Bs.</option>
                <option value="50-100">50 - 100 Bs.</option>
                <option value="100+">Más de 100 Bs.</option>
              </select>
            </div>
          </div>

          <!-- Filter Group: Sort -->
          <div class="filter-group">
            <label for="sort-select">Ordenar Por</label>
            <div class="custom-select-wrapper">
              <select id="sort-select" [(ngModel)]="orden" (change)="ordenarComponentes()">
                <option value="relevancia">Relevancia</option>
                <option value="precioAsc">Precio: Menor a Mayor</option>
                <option value="precioDesc">Precio: Mayor a Menor</option>
              </select>
            </div>
          </div>

          <!-- Filter Group: Stock (Mock) -->
          <div class="filter-group">
            <label for="stock-filter">Disponibilidad</label>
            <div class="custom-select-wrapper">
              <select id="stock-filter">
                <option value="">Todos</option>
                <option value="in-stock">En Stock</option>
                <option value="pre-order">Pre-orden</option>
              </select>
            </div>
          </div>

        </div>

        <div class="filters-actions">
          <button class="btn-reset">Restablecer</button>
          <button class="btn-apply" (click)="toggleFiltrosAvanzados()">Aplicar Filtros</button>
        </div>
      </div>


    </section>

    <!-- MAIN CONTENT (Full Width Grid) -->
    <div class="main-catalogo full-width">
      <section class="contenido-catalogo">

        <div class="grid-productos">
          <app-product-card *ngFor="let producto of productosFiltrados" [product]="producto"
            (cardClick)="router.navigate(['/detalle-producto', producto.id])" (addToCart)="agregarAlCarrito($event)">
          </app-product-card>
        </div>

      </section>
    </div>
  </div>
</div>